{"remainingRequest":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\src\\components\\city\\city.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\src\\components\\city\\city.vue","mtime":1594201433967},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\lixindom\\2020\\uni-app\\Hui-Admin-Pro一个使用iView的前端框架\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.city_components {\n    .city_Dropdown {\n        width: 400px;\n\n        .listDiv {\n            width: 100%;\n            padding: 2px 8px;\n\n            .meun {\n                justify-content: space-between;\n                margin-bottom: 8px;\n                &>span{\n                    margin-left: 5px;\n                }\n                .Select{\n                    width: calc(100% - 60px);\n                }\n            }\n\n            .list {\n                & > div:first-child {\n                    flex-wrap: wrap;\n                    margin-bottom: 8px;\n\n                    span {\n                        cursor: pointer;\n                        font-size: 12px;\n                        border: 1px solid #e8eaec;\n                        color: #515a6e;\n                        margin: 2px 4px 2px 0;\n                        padding: 0 8px;\n                        border-radius: 3px;\n                    }\n                }\n\n                /*省市*/\n\n                & > div:last-child {\n                    max-height: 200px;\n                    overflow-y: auto;\n\n                    & > .item {\n                        justify-content: flex-start;\n                        align-items: flex-start;\n                        margin-bottom: 8px;\n                        & > span {\n                            white-space: nowrap;\n                            font-weight: bold;\n                            min-width: 50px;\n                        }\n\n                        & > div {\n                            flex-wrap: wrap;\n                            flex-shrink: 1;\n\n                            & > span {\n                                margin-right: 10px;\n                                margin-bottom: 5px;\n                                cursor: pointer;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n",{"version":3,"sources":["city.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"city.vue","sourceRoot":"src/components/city","sourcesContent":["<template>\r\n    <div class=\"city_components flexC\">\r\n        <div class=\"flexC\">\r\n            <Dropdown trigger=\"custom\" class=\"city_Dropdown\" :visible=\"visible\" :stop-propagation=\"true\" @on-visible-change=\"visibleStatus\">\r\n                <a href=\"javascript:void(0)\" @click=\"visible=true\" id=\"DropdownA\">\r\n                    {{checkName}}\r\n                    <Icon type=\"ios-arrow-down\"></Icon>\r\n                </a>\r\n                <DropdownMenu slot=\"list\" id=\"DropdownMenu\">\r\n                    <div class=\"listDiv flexC\">\r\n                        <div class=\"meun flexR\">\r\n                            <!--<RadioGroup type=\"button\" size=\"small\" class=\"flexR\">\r\n                                <Radio label=\"\"></Radio>\r\n                                <Radio label=\"热门城市\"></Radio>\r\n                            </RadioGroup>-->\r\n                            <span>按省份</span>\r\n                            <Select class=\"Select\" filterable transfer clearable size=\"small\" placeholder=\"输入城市名称搜索\" @on-change=\"checkCity\">\r\n                                <template v-for=\"item in schList\">\r\n                                    <Option v-if=\"!it.name.includes('直辖')\" v-for=\"it in item.children\" :value=\"it.name\" :key=\"it.code\">{{ it.name | cityName1}}</Option>\r\n                                </template>\r\n                            </Select>\r\n                        </div>\r\n                        <div class=\"list flexC\">\r\n                            <div class=\"flexR\">\r\n                                <span class=\"flexC\" v-for=\"(item,index) in cityMark\" :key=\"item+index\" @click=\"gundong(item,index)\">{{item}}</span>\r\n                            </div>\r\n                            <!--省市列表-->\r\n                            <div class=\"flexC\" id=\"list\">\r\n                                <div class=\"item flexR\" :class=\"item.pin\" v-for=\"(item,index) in cityList\" :key=\"item.name+index\">\r\n                                    <span>{{item.name | cityName}}</span>\r\n                                    <div class=\"flexR\">\r\n                                        <span class=\"flexC\" v-if=\"!it.name.includes('直辖')\" v-for=\"(it,index) in item.children\" :key=\"it.name+index\"\r\n                                              @click=\"checkCity(it.name)\">{{it.name | cityName1}}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"item flexR\" :class=\"item.pin\" v-for=\"(item,index) in cityShi\" :key=\"item.name+index\">\r\n                                    <span>{{item.name}}</span>\r\n                                    <div class=\"flexR\">\r\n                                        <span class=\"flexC\" v-for=\"(it,i) in item.children\" :key=\"it.name+i\" @click=\"checkCity(it.name)\">{{it.name | cityName1}}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </DropdownMenu>\r\n            </Dropdown>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import cityData from '@/lib/city_code.json'\r\n    let self\r\n    export default {\r\n        name: \"city_components\",\r\n        data() {\r\n            self = this\r\n            return {\r\n                visible: false, // 是否显示\r\n                cityList: [],\r\n                cityMark: [], // 字母标识\r\n                cityShi: [], // 直辖市 & 港澳\r\n                schList: [], // 搜索的数据\r\n                checkName: '选择城市'\r\n            }\r\n        },\r\n        created() {\r\n        },\r\n        mounted() {\r\n            this.getCityData()\r\n            // 自定义关闭下拉框\r\n            document.addEventListener('click',(event)=>{\r\n                let spa = document.getElementById(\"DropdownA\")\r\n                let sp = document.getElementById(\"DropdownMenu\")\r\n                if(spa && sp){\r\n                    //如果我们点击到了id为Dropdown以外的区域\r\n                    if(!spa.contains(event.target) && !sp.contains(event.target)){\r\n                        this.visible = false\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        computed: {\r\n            sortList() {\r\n                return cityData.sort((a, b) => {\r\n                    return a['pin'].localeCompare(b['pin'])\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            // 处理数据\r\n            getCityData() {\r\n                let pinArr = []\r\n                let shiArr = []\r\n                let gaArr = []\r\n                for (let v of this.sortList) {\r\n                    if (v.name.includes('市')) {\r\n                        // 直辖市\r\n                        shiArr.push({name: v.name, code: v.code})\r\n                    }else if (v.name.includes('特别行政区')) {\r\n                        // 特别行政区\r\n                        gaArr.push({name: v.name, code: v.code})\r\n                    } else {\r\n                        pinArr.push(v.pin)\r\n                        this.cityList.push(v)\r\n                    }\r\n                }\r\n                this.cityShi.push({name: '直辖：',pin: 'ZXS',children: shiArr})\r\n                this.cityShi.push({name: '港澳：',pin: 'GA',children: gaArr})\r\n                let setArr = new Set([...pinArr])\r\n                this.cityMark = Array.from(setArr).sort()\r\n                this.cityMark.push('直辖市', '港澳')\r\n\r\n                // 搜索数据\r\n                this.schList = JSON.parse(JSON.stringify(this.cityList))\r\n                for(let v of this.cityShi) {\r\n                    this.schList.push(v)\r\n                }\r\n            },\r\n            // 首字母索引 滚动到指定位置\r\n            gundong(pin,index) {\r\n                // offsetTop：距离上层的顶部距离\r\n                let arr = document.getElementById('list').childNodes;\r\n                for (let i = arr.length - 1; i >= 0; i--) {\r\n                    if(pin === '直辖市'){\r\n                        if(arr[i].className.includes('ZXS')) {\r\n                            index = i\r\n                        }\r\n                    } else if(pin === '港澳') {\r\n                        if(arr[i].className.includes('GA')) {\r\n                            index = i\r\n                        }\r\n                    } else {\r\n                        if(arr[i].className.includes(pin)) {\r\n                            index = i\r\n                        }\r\n                    }\r\n                    arr[index].parentNode.scrollTo(0, arr[index].offsetTop - arr[index].parentNode.offsetTop)\r\n                }\r\n            },\r\n            // 处理城市显示格式\r\n            cityName2(name) {\r\n                if (name.indexOf('自治') > 0) {\r\n                    return name.substr(0, name.indexOf('自治'))\r\n                } else if (name.indexOf('市') > 0) {\r\n                    return name.substr(0, name.indexOf('市'))\r\n                } else if (name.indexOf('县') > 0) {\r\n                    return name.substr(0, name.indexOf('县'))\r\n                } else if (name.indexOf('地区') > 0) {\r\n                    return name.substr(0, name.indexOf('地区'))\r\n                } else if (name.indexOf('特别行政区') > 0) {\r\n                    return name.substr(0, name.indexOf('特别行政区'))\r\n                }\r\n            },\r\n            // 选择城市\r\n            checkCity(name){\r\n                if(name){\r\n                    this.checkName = this.cityName2(name)\r\n                    this.visible = false\r\n                }\r\n            },\r\n            // 每次打开下拉框回到滚动条顶部\r\n            visibleStatus(status){\r\n                if(!status){\r\n                    document.getElementById('list').scrollTo(0,0)\r\n                }\r\n            }\r\n        },\r\n        watch: {},\r\n        filters: {\r\n            cityName(name) {\r\n                if (name.indexOf('省') > 0) {\r\n                    return name.substr(0, name.indexOf('省')) + '：'\r\n                } else if (name.indexOf('自治区') > 0) {\r\n                    return name.substr(0, 2) + '：'\r\n                }else if (name.indexOf('市') > 0) {\r\n                    return name.substr(0, name.indexOf('市'))\r\n                }\r\n            },\r\n            cityName1(name) {\r\n                return self.cityName2(name)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    .city_components {\r\n        .city_Dropdown {\r\n            width: 400px;\r\n\r\n            .listDiv {\r\n                width: 100%;\r\n                padding: 2px 8px;\r\n\r\n                .meun {\r\n                    justify-content: space-between;\r\n                    margin-bottom: 8px;\r\n                    &>span{\r\n                        margin-left: 5px;\r\n                    }\r\n                    .Select{\r\n                        width: calc(100% - 60px);\r\n                    }\r\n                }\r\n\r\n                .list {\r\n                    & > div:first-child {\r\n                        flex-wrap: wrap;\r\n                        margin-bottom: 8px;\r\n\r\n                        span {\r\n                            cursor: pointer;\r\n                            font-size: 12px;\r\n                            border: 1px solid #e8eaec;\r\n                            color: #515a6e;\r\n                            margin: 2px 4px 2px 0;\r\n                            padding: 0 8px;\r\n                            border-radius: 3px;\r\n                        }\r\n                    }\r\n\r\n                    /*省市*/\r\n\r\n                    & > div:last-child {\r\n                        max-height: 200px;\r\n                        overflow-y: auto;\r\n\r\n                        & > .item {\r\n                            justify-content: flex-start;\r\n                            align-items: flex-start;\r\n                            margin-bottom: 8px;\r\n                            & > span {\r\n                                white-space: nowrap;\r\n                                font-weight: bold;\r\n                                min-width: 50px;\r\n                            }\r\n\r\n                            & > div {\r\n                                flex-wrap: wrap;\r\n                                flex-shrink: 1;\r\n\r\n                                & > span {\r\n                                    margin-right: 10px;\r\n                                    margin-bottom: 5px;\r\n                                    cursor: pointer;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>"]}]}